# Travis configuration for automatic build

language: c++

matrix:
  include:
    - os: linux
      sudo: required
      dist: xenial
      compiler: gcc
    - os: linux
      sudo: required
      dist: xenial
      compiler: clang
    - os: osx
      osx_image: xcode10.1

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
      sudo apt-get -qq update;
      sudo apt-get install -y libgtk-3-dev mesa-common-dev libgl1-mesa-dev;
      sudo apt-get install -y scons libglfw3-dev;
    fi

script:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
      make release || travis_terminate 1;
    fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
      cd osx/goxel;
      xcodebuild build CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO || travis_terminate 1;
      cd ../..;
    fi
